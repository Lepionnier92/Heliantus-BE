<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil | Heliantus</title>
    <style>
        body {
            background-image: url('https://cdn.discordapp.com/attachments/1062809373828714576/1210280203402878976/textureH.png?ex=65e9fc46&is=65d78746&hm=c7867293bd7678378d4e8371375c6e633c3b22b4260e298d2484c6bd912d1e0f');
            background-repeat: repeat; /* Répéter l'image de fond */
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; /* Police spécifiée */
            margin: 0; /* Supprimer les marges par défaut */
        }
        .en_tête {
            margin: auto; /* Ajustement automatique de la marge */
            text-align: center; /* Alignement central du texte */
            color: rgb(46, 43, 43); /* Couleur du texte */
            padding: auto; /* Ajustement automatique du rembourrage */
            font-size: 15px; /* Taille de la police pour l'en-tête */
        }
        h2 {
            color: #000; /* Couleur du texte noir */
            margin-top: 20px; /* Marge supérieure pour l'espace */
        }
        .carte {
            margin-top: 20px; /* Marge supérieure pour l'espace */
            text-align: center; /* Alignement central */
            background-color: rgba(255, 255, 255, 0.5); /* Couleur de fond semi-transparente */
            padding: 20px; /* Espacement interne */
            border-radius: 10px; /* Bordure arrondie */
            position: relative; /* Position relative pour positionner le bouton supprimer */
        }
        .supprimer {
            position: absolute; /* Position absolue par rapport à la carte */
            top: 5px; /* Décalage par rapport au haut de la carte */
            right: 5px; /* Décalage par rapport à la droite de la carte */
            border-radius: 50%; /* Rendre le bouton rond */
            background-color: #FF5733; /* Couleur de fond pour le bouton supprimer */
            color: white; /* Couleur du texte */
            width: 25px; /* Largeur du bouton supprimer */
            height: 25px; /* Hauteur du bouton supprimer */
            font-size: 12px; /* Taille de la police */
            border: none; /* Supprimer la bordure */
            cursor: pointer; /* Curseur pointer */
        }
        .supprimer:hover {
            background-color: #FF2200; /* Changement de couleur au survol */
        }
    </style>
</head>
<body>
    <div class="admin_container">
        <button class="bouton" onclick="creerCarte()">Créer une carte</button>
    </div>

    <div class="en_tête">
        <img src="https://cdn.discordapp.com/attachments/1062809373828714576/1210252116149674034/minecraft_title.png?ex=65e9e21d&is=65d76d1d&hm=a45e96ebe37ce67436be27a0d8c627bde8dd1db4845a2243b788e6e4ea603970" alt="Logo Heliantus" class="titre_logo_heliantus">
        <h2>Liste des Cartes d'identité</h2>
    </div>

    <div id="cartes">
        <!-- Les cartes seront ajoutées ici -->
    </div>

    <script>
        var admins = {
            "admin1": "pseudo1",
            "admin2": "pseudo2"
        };

        function creerCarte() {
            var codeAdmin = prompt("Entrez le code administrateur :");
            if (codeAdmin !== null) {
                if (admins.hasOwnProperty(codeAdmin)) {
                    var pseudo = prompt("Entrez le pseudo de la personne :");
                    if (pseudo !== null) {
                        var carteDiv = document.createElement('div');
                        carteDiv.className = "carte";

                        var supprimerBtn = document.createElement('button');
                        supprimerBtn.className = "supprimer";
                        supprimerBtn.innerText = "X";
                        supprimerBtn.onclick = function() {
                            var confirmation = confirm("Êtes-vous sûr de vouloir supprimer cette carte ?");
                            if (confirmation) {
                                // Envoi du code administrateur à votre serveur pour vérification
                                var xhr = new XMLHttpRequest();
                                xhr.open("POST", "votre_url_de_traitement", true);
                                xhr.setRequestHeader("Content-Type", "application/json");
                                xhr.onreadystatechange = function () {
                                    if (xhr.readyState === 4 && xhr.status === 200) {
                                        // Suppression de la carte si le code est correct
                                        this.parentNode.remove();
                                        // Envoi du message SMS
                                        envoyerSMS();
                                    }
                                };
                                xhr.send(JSON.stringify({codeAdmin: codeAdmin}));
                            }
                        };

                        var img = document.createElement('img');
                        img.src = "https://skins.nationsglory.fr/face/" + pseudo + "/3d/20";
                        img.className = "img-icon";
                        img.alt = "Photo du joueur";

                        var a = document.createElement('a');
                        a.innerHTML = "<strong>" + pseudo + "</strong>";

                        carteDiv.appendChild(img);
                        carteDiv.appendChild(a);
                        carteDiv.appendChild(supprimerBtn);

                        document.getElementById('cartes').appendChild(carteDiv);
                    }
                } else {
                    alert("Code administrateur incorrect");
                }
            }
        }

        function envoyerSMS() {
            // Code pour envoyer un SMS avec Twilio
            const twilio = require('twilio');

            const accountSid = 'VOTRE_ACCOUNT_SID';
            const authToken = 'VOTRE_AUTH_TOKEN';
            const client = new twilio(accountSid, authToken);

            client.messages
                .create({
                    body: 'Une carte a été supprimée sur votre site.',
                    from: 'VOTRE_NUMERO_TWILIO',
                    to: '+NUMERO_DESTINATAIRE'
                })
                .then(message => console.log(message.sid))
                .catch(console.error);
        }
    </script>
</body>
</html>